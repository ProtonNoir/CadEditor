<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">

    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">

    <title>Обзор возможностей CadEditor</title>
  </head>

  <body>

    <header>
      <div class="container">
        <h1>Обзор возможностей CadEditor</h1>
        <h2>Возможности редактора и утилит</h2>
      </div>
    </header>

    <div class="container">
      <section id="main_content">

<p>
<b>CadEditor</b> - редактор уровней для множества игр под разные платформы (NES, Sega Mega Drive, GBA).
</p>
<p>
<img src="images/tut1_cad_editor_main.png" alt="редактор экранов">
Основное предназначение - редактирование строения уровней (экранов и блоков),а также изменение размещения положения объектов на них.
</p>

<p>
<h2><a id="komu" class="anchor" href="#komu" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Кому может быть интересен редактор</h2>
<ul>
<li><b>Исследователи игр и ромхакеры</b> - для изучения строения уровней и создания хаков. В редакторе есть конфиги для всех уровней для нескольких игр, и с его помощью было создано более 10 хаков (<a href="http://www.emu-land.net/forum/index.php/topic,60286.0.html">Ветка на форуме emu-land</a>, посвящённая созданию хаков с помощью редактора).</li>
<img src="images/tut2_cad_dwd_new_levels.png" alt="хак чп">
<li><b>Разработчики других редакторов уровней</b> для конкретных игр могут использовать редактор в качестве основы для своих проектов. Исходный код CadEditor открыт, также редактор поддерживает добавление модулей для редактирования специфических для игр данных (<a href="cadeditor-modules.html">Описание модулей</a>). На основе CadEditor'а был сделан редактор игры <a href="https://github.com/lab313ru/tf3editor">Thunder Force 3</a>.</li>
<img src="images/tut2_tf3_editor.png" alt="tf3 editor">
<li><b>Разработчики homebrew-проектов</b> для платформ NES могут использовать редактор для создания уровней в своих играх.</li>
<img src="images/tut2_megaman_blocks.png" alt="mm blocks">
</ul>
</p>

<p>
Задача редактора на данном этапе - обеспечить возможность подключения к нему игр с разной внутренней архитектурой уровней, а также упростить процесс исследования и подключения к нему игр для конечных пользователей.
</p>

<p>
Для этой цели редактор поддерживает возможность гибкого задания способа построения уровня в виде динамической загрузки скриптов на языке C# (в комплекте с редактором идут скрипты для большого количества игр, большая часть использует библиотечные функции редактора для загрузки данных из ROM-файлов).
</p>

<p>
<h2><a id="osn" class="anchor" href="#osn" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Основные особенности CadEditor</h2>
<ul>
<li><b>Расширяемость</b>. Открытый исходный код и формат файлов описания позволяют добавить для редактирования данные для новых игр.</li>
<li><b>Гибкость.</b> Конфиги для игр используют язык программирования <b><i>C#</i></b>, который позволяет описать данные любой сложности.</li>
<li><b>Модульность.</b> Основная часть функций вынесена в плагины, которые можно использовать в разных играх с небольшим количеством изменений, описанных в конфигах. Сам редактор также является модулем, что позволяет использовать его в качестве библиотеки (<a href="https://github.com/spiiin/CadEditor/tree/master/JupyterCadEditor">пример скриптов</a> с использованием CadEditor в языке <b><i>Python</i></b> с использованием <b><i>JupyterCadEditor</i></b>) для отображения данных об уровнях.</li>
<li><b>Работа с несколькими файлами</b>. На базовом уровне редактор позволяет работать одновременно с ROM и файлом дампа данных (для редактирования расжатых данных). Также в конфигах можно загружать данные из отдельных файлов (расжатая видеопамять, палитры, описания врагов и т.п.)</li>
<li><b>Большое количество примеров</b>. В настоящий момент в комплекте с редактором идут более 400 конфигов, позволяющих редактировать около 500 разных уровней в более чем 80 играх для платформ <b><i>NES</i></b> и <b><i>SMD</i></b>. </li>
<li><b>Наличие вспомогательных инструментов</b>. Для облегчения процесса создания конфигов для новых игр и работы с поддерживаемыми создано несколько вспомогательных утилит и скриптов. Они часто используют язык программирования <b><i>Python</i></b> и используются для таких задач, когда автоматический поиск блоков в играх, создания картинок блоков или декомпрессия сжатых данных из ROM.</li>
<li><b>Кроссплатформенность</b>. Хотя основной платформой является <b><i>Windows</i></b>, редактор написан с использованием языка <b><i>C#</i></b>, и он может быть собран как с использованием <b><i>.Net Framework</i></b>, так и с использованием <b><i>Mono</i></b> (под <b><i>Windows</i></b> или <b><i>Linux</i></b>)</li>
</ul>
</p>

<p>
Частично реализованы:
<ul>
<li><b>Набор возможностей для удобного редактирования</b>. Блоки можно объединять в виртуальные структуры, для создания "кистей", присутствует ограниченная поддержка 2 слоёв блоков и виртуального рендера данных поверх них, некоторые данные в конфиге возможно менять динамически.</li>
<li><b>Экспорт/импорт данных.</b> Присутствует возможность экспорта некоторых видов данных в виде картинок, бинарном или json-формате.</li>
<li><b>Документация.</b> Пока практически отсутствует :(</li>
</ul>
</p>

<p>
<h3>Редактор экранов</h3>
Позволяет использовать в качестве базовых блоков:
<ul>
<li>Построение из ROM различными способами структуры</li>
<li>Заранее заготовленные картинки (полученные из конкретной игры или нарисованные для своего проекта)</li>
</ul>
</p>

<p>
<h3>Редактор блоков</h3>
<ul>
<li>Поддерживает построение иерархии блоков любого количества вложенности.</li>
<li><b>Блоки</b> (Tile-Sprite Assembly) любого размера (чаще всего используются блоки 2x2 и 4x4 тайла). Также поддерживается кодирования аттрибутов блоков - индекса палитры и физических свойств блока, или отключение этих аттрибутов блокв для игр, в которых эти данные кодируются другими способами. Для SMD игр поддерживаются блоки размером 2x2 и 4x4 тайла.</li>
<li><b>Макроблоки</b> (объединение нескольких блоков в блок большего размера) нескольких уровней, иногда игра использует несколько вложенных видов блоков для описания уровня. Также поддерживается хранения аттрибутов палитры на уровне макроблоков, как они хранятся в некоторых играх</li>
<li>Описание блоков в разных форматах. Поддержка описание блоков и макроблоков линейно или с определённым шагом, возможно менять порядок описания (слева-направо, сверху-вниз). Кроме того, за счёт использования языка программирования в конфигах, можно описывать любые новые виды хранения блоков (например, предварительно сжатые).</li>
<li>Описание экранов напрямую <b>маппингами</b> или <b>тайлами</b> без блоков (часто используется для кодирования целого экрана меню или миссии, и в качестве описания фона в играх для SMD).</li>
<li>Поддержка нескольких отдельных наборов блоков с возможностью переключать их параметры (банки видеопамяти и палитры, а также наборы субблоков) для конкретного отображения состояния блоков в играх с динамически изменяемыми параметрами уровня.</li>
</ul>
</p>

<p>
<h3>Редактор объектов</h3>
<ul>
<li>Поддерживает несколько отдельных списков объектов в разных форматах, загружаемых различными способами.</li>
<li>Поддерживает изменение порядка объектов в списке.</li>
<li>Игровые объекты могут содержать несколько дополнительных аттрибутов (кодируемых в виде чисел).</li>
<li>Поддержка маленьких и больших картинок объектов для отображения в редакторе (наборы картинок не идут в комплекте с редактором).</li>
<li>Пока что имеет много ограничений и полноценно реализованы не все возможности, необходимые для поддержки списков объектов в любой игре.</li>
</ul>
</p>

<p>
<h3>Дополнительные утилиты</h3>
(Часть утилит в дальнейшем будет выделена в отдельные проекты)
<ul>
<li><b>Autocorrupter</b>. <b><i>Lua</i></b>-скрипт (для nes и smd) для изменения байтов в ROM и ослеживания последствий изменения на экране с помощью создания скриншотов. Также используется для создания набора заготовленных картинок блоков из игр (<a href="https://habrahabr.ru/post/259483/">статья</a> с примером использования для игры <b>Jackal</b>).</li>
<li><b><a href="https://github.com/spiiin/NesBlockFinder">NesBlockFinder</a></b>. Отдельный проект для автоматического поиска адреса блоков в ROM. Реализован на языке <b><i>Python</i></b>.</li>
<li><b>SettingsVerifier</b>. Утилита для проверки корректности всех конфигов в папке редактора.</li>
<li><b>JupyterCadEditor</b>. Использование редактора CadEditor в качестве библиотеки отображения данных для <b><i>Python</i></b>. Примеры используют <b><i>JupyterNotebook</i></b> в качестве средства отображения данных. Также присутствуют примеры для декомпресси данных, рендера уровней в играх со сложной структурой, поиска отличий в региональных версиях игр, массированного поиска данных в различных играх и другое.</li>
<li><b>Stuff</b>. Мелкие скрипты на <b><i>Lua</i></b> и <b><i>Python</i></b> для автоматизации и упрощения различных задач, таких как сравнение данных в <b>cdl</b>-файлах, поиск поинтера на данные по их абсолютному адресу, разметки данных в Ida или логгирования данных об игровых архивах с помощью <b><i>Lua</i></b>-скриптов.</li>
</ul>
</p>

  </section>
  </div> 
  </body>
</html>
